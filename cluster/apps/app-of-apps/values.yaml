apps:

  - name: hetzner-ccm
    path: cluster/apps/hetzner-ccm
    targetRevision: main
    namespace: kube-system

#  - name: hetzner-csi
#    path: cluster/apps/hetzner-csi
#    targetRevision: main
#    namespace: kube-system

  - name: nextcloud
    path: cluster/apps/nextcloud
    namespace: nextcloud
    valueFiles: values.yaml

  - name: loki-stack
    path: charts/loki-stack
    targetRevision: loki-stack-2.6.5
    repoURL: https://github.com/grafana/helm-charts.git
    namespace: monitoring
    setParams:
      - name: grafana.enabled
        value: true
      - name: prometheus.enabled
        value: true

  - name: kured
    path: charts/kured
    repoURL: https://github.com/weaveworks/kured.git
    namespace: kube-system

  - name: longhorn
    path: charts/longhorn
    targetRevision: longhorn-1.3.0
    repoURL: https://github.com/longhorn/charts.git
    namespace: longhorn-system
#    setParams:
#      - name: persistence.defaultFsType
#        value: btrfs

  - name: sealed-secrets
    path: helm/sealed-secrets
    targetRevision: v0.18.0
    repoURL: https://github.com/bitnami-labs/sealed-secrets.git
    namespace: kube-system
    setParams:
      - name: metrics.serviceMonitor.namespace
        value: monitoring
      - name: fullnameOverride
        value: sealed-secrets-controller

  - name: secrets
    path: cluster/apps/secrets
    targetRevision: main

  - name: cert-manager-init
    path: cluster/apps/cert-manager-init

  - name: cert-manager
    path: cluster/apps/cert-manager

  - name: nginx-ingress
    path: charts/ingress-nginx
    repoURL: https://github.com/kubernetes/ingress-nginx/
    targetRevision: helm-chart-4.2.0
    setParams:
      - name: fullnameOverride
        value: ingress-nginx
      - name: controller
        value: |-
          kind: DaemonSet
          hostNetwork: true
          hostPort:
            enabled: true
          service:
            enabled: false
          publishService:
            enabled: false
          metrics:
            enabled: true
            serviceMonitor:
              enabled: true
          config:
            use-forwarded-headers: "true"